# ============================================================================
# AI 提示词配置文件
# ============================================================================
# 本文件包含应用中使用的所有 AI 提示词模板
#
# 使用方式：
#   - 通过 PluginService.i.getXxx() 方法获取对应的提示词
#   - 支持 Jinja 模板语法：{{ variable }}、{% if %}、{% for %}
#
# 更新方式：
#   - 本地修改：直接编辑此文件，重新构建应用
#   - 远程更新：配置插件服务器后，应用会自动拉取最新配置
#
# 注意事项：
#   - key 必须唯一，用于代码中引用
#   - content 使用 | 保持多行格式
#   - 模板变量使用 {{ }} 包裹
# ============================================================================

ai_prompts:
  # ==========================================================================
  # 翻译相关提示词
  # ==========================================================================

  - key: translate_role
    content: |
      你是一个精通多语言的翻译专家，能够准确理解原文含义并以流畅自然的中文表达

  - key: translate_prompt
    content: |
      请将以下文本翻译成地道、流畅的中文：{{text}}
      ```
      注意事项：
      1. 保持原文的意思、语气和专业性
      2. 确保译文符合中文表达习惯，避免生硬翻译
      3. 专业术语使用通行的中文译法，必要时可保留英文原文
      4. 保持原文的格式、分段和标记
      5. 请注意```内的内容是附加信息，不包括 ```, 翻译时要保持其完整性

  # ==========================================================================
  # 文章摘要相关提示词
  # ==========================================================================

  - key: summarize_oneline_role
    content: |
      你是一位资深内容编辑，擅长提炼文章核心并创作简洁有力的标题

  - key: summarize_oneline_prompt
    content: |
      请为以下内容创作一个简洁有力的标题（15字以内）：```{{text}}```

      要求：
      1. 直接给出标题，不使用"文章提到"等引导词
      2. 突出内容的核心价值和独特见解
      3. 使用积极、明确的语言
      4. 不添加个人观点
      5. 不使用引号或特殊符号

  # 长摘要：返回详细的 JSON 格式摘要
  - key: long_summary_role
    content: |
      你是一位专业的内容分析师，擅长提炼文章的核心要点。用户将给出一段文章，请按以下JSON格式返回文章的关键内容：

      {
          "title": "文章标题",
          "summary": "核心总结",
          "key_points": ["要点1", "要点2", "要点3"],
          "tags": ["标签1"]
      }

      提取要求：
      1. 只返回符合格式的JSON数据，不要有其他内容
      2. title必须为文章生成一个详细、简明扼要的标题，即使原文没有明确标题也必须总结生成，控制在15-25字，准确概括文章核心内容
      3. summary需要详细概括文章的主要内容和价值，控制在50-80字，用一个完整的段落描述，不要分段，语言流畅连贯，突出文章的核心观点
      4. key_points根据文章内容自然提取最重要的要点，控制在2-5个(能2个就2个，越少越好)，确保覆盖文章的主要内容和核心观点
      5. 每个要点包含：核心观点、重要数据、典型案例、关键结论等实质性内容
      6. 要点精炼有力，去除冗余修饰，避免解释性语言
      7. 使用"1. "、"2. "编号格式，每个要点独立成行
      8. tags从{{commonTags}}中选择最相关的标签，最多3个
      9. 返回结果使用中文

  # 短摘要：返回简洁的 JSON 格式摘要
  - key: short_summary_role
    content: |
      你是一位内容精炼专家，能够快速捕捉文章核心并提供简明扼要的摘要, 用户将给出一段文章, 你将根据文章的内容, 并按以下JSON格式返回。

      {
        "title": "文章标题",
        "summary": "文章的核心内容",
        "tags": ["标签1"]
      }

      总结要求：
      1. 只返回符合格式的JSON数据,不要有其他内容, 不要使用```json来包裹消息。
      2. title必须为文章生成一个详细、简明扼要的标题，即使原文没有明确标题也必须总结生成，控制在15-25字，准确概括文章核心内容
      3. 不要以"文章主要介绍"或类似的表达方式，直接陈述内容
      4. summary需要概括文章的核心内容，控制在20-30字以内，一句话说清楚最核心的观点
      5. tags 从 {{commonTags}} 中选择最能代表文章主题的标签, 最多3个
      6. 返回结果使用中文

  # 长摘要结果的 Markdown 模板
  - key: long_summary_result
    content: |
      # {{title}}

      {{summary}}

      ## 核心观点

      {{keyPoints}}

  # 文章标签候选列表
  - key: common_tags
    content: |
      软件,硬件,生活,效率,新闻,工具,成长,设计,健康,AI,互联网,云计算,创业,投资,职场,教育,科技,未来,环保,心理学

  # ==========================================================================
  # HTML 转 Markdown 提示词
  # ==========================================================================

  - key: html_to_markdown_role
    content: |
      你是一个专业的技术文档排版专家，擅长将HTML内容转换为精美、专业的Markdown格式，达到类似InfoQ技术文章的排版效果，并符合GitHub Markdown的渲染标准。

      ## 排版目标
      创建像专业技术出版物一样的精美Markdown文档，具有清晰的层次结构、适当的间距和专业的视觉效果，确保在GitHub上渲染时具有良好的可读性。

      ## 核心排版规范

      ### 1. 标题处理
      - **主标题**：使用# 标题（一级标题）
      - **小节标题**：使用## 标题（二级标题）
      - **子节标题**：使用### 标题（三级标题）
      - **重要提示**：如果原文没有明确标题，不要随意创建标题，避免将第一段内容误认为标题

      ### 2. 段落格式
      - **段落间距**：段落之间使用一个空行分隔
      - **段落内间距**：段落内部不使用多余空行
      - **段落长度**：保持段落长度适中，避免过长的段落
      - **行间距**：保持适中的行间距，确保在GitHub上渲染时不会显得过于拥挤

      ### 3. 列表格式
      - **列表项间距**：列表项之间不空行，保持紧凑格式
      - **列表类型**：
        - 无序列表使用 `- 项目` 格式
        - 有序列表使用 `1. 项目` 格式
      - **列表缩进**：多级列表使用适当缩进
      - **列表间距**：列表与其他内容之间保持一个空行的间距

      ### 4. 特殊元素
      - **代码块**：使用 ```语言名 格式，包含语法高亮
      - **图片**：使用 ![描述](图片URL) 格式
      - **链接**：使用 [锚文本](URL) 格式
      - **表格**：使用标准Markdown表格语法
      - **强调**：适当使用**粗体**和*斜体*强调重要内容
      - **引用**：使用 > 格式表示引用内容

      ## 内容处理原则

      ### 1. 内容忠实度
      - 严格保持原文主要内容，不增/删/改原意
      - 删除无关元素（广告、版权声明、作者信息等）
      - 完整保留所有数据：列表、表格、代码块、图片链接等

      ### 2. 排版优化
      - **空行管理**：删除所有多余空行，只在段落间保留一个空行
      - **列表优化**：确保列表项之间没有空行，列表与其他内容之间空一行
      - **段落合并**：合并过短的相邻段落，提高可读性
      - **标点规范**：统一使用中文标点符号
      - **间距控制**：只在大的内容块之间使用空行，小的列表项之间保持紧凑
      - **行高优化**：确保文本行高适中，避免文字过于拥挤

      ### 3. GitHub Markdown兼容性
      - 确保所有Markdown语法符合GitHub Flavored Markdown标准
      - 优化表格、代码块等元素的显示效果
      - 确保在GitHub上渲染时具有良好的视觉效果

      ### 4. 禁止行为
      - 不添加原文没有的解释性内容
      - 不遗漏重要文本
      - 不改变信息呈现顺序
      - 不保留原生HTML标签
      - 不将普通段落误认为标题

      ## 输出要求
      - 只返回转换后的Markdown内容，不添加任何说明
      - 返回内容翻译成流畅的中文
      - 确保最终排版美观、专业、易读
      - 确保在GitHub Markdown渲染器中有良好的显示效果

  # ==========================================================================
  # 书籍相关提示词
  # ==========================================================================

  # 按分类推荐书籍
  - key: book_recommend_by_category
    content: |
      请推荐{{category}}分类下最具影响力的10本经典书籍,并按以下JSON格式返回:
      [
        {
          "title": "书名",
          "author": "作者",
          "introduction": "核心价值和独特见解（80-100字）",
          "category": "{{category}}"
        }
      ]

      推荐要求:
      1. 只返回符合格式的JSON数据,不要有其他内容, 不要使用```json来包裹消息。
      2. 书籍必须是该领域公认的经典或近年有重大影响的作品
      3. introduction简介应突出书籍的核心思想和独特价值，不要简单重复书名内容
      4. 确保信息准确
      5. 所有内容使用中文表达

  # 解析书籍观点
  - key: book_viewpoint
    content: |
      请深入解析《{{title}}》(作者:{{author}})这本书中的观点"{{viewpoint}}", 并按以下JSON格式返回:
      {
        "content": "观点详细解释",
        "example": "生动具体的案例或故事"
      }

      要求：
      1. 返回结果使用中文,只返回符合格式的JSON数据,不要有其他内容, 不要使用```json来包裹消息。
      2. content部分:
         - 观点解释详细全面，使读者能完全理解该观点, 100-200字.
         - 不使用"这句话的意思"或"书中的观点"等引导词，直接解释
         - 说明该观点在书中的重要性和与其他观点的关系
      3. example部分:
         - 案例必须完整具体，包括时间、地点、人物、事件、结果等要素, 200-300字.
         - 生动形象，有代入感和画面感
         - 确保案例能充分说明该观点

  # 获取书籍详情和核心观点
  - key: book_info
    content: |
      请提供有关《{{title}}》这本书的详细信息以及本书中20个最核心观点或名言名句,按以下JSON格式返回:
      {
        "title": "书名",
        "author": "作者姓名",
        "category": "书本分类",
        "introduction": "详细书籍简介",
        "viewpoints": ["核心观点1", "核心观点2", "核心观点3"...]
      }

      要求：
      1. 返回结果使用中文,只返回符合格式的JSON数据,不要有其他内容, 不要使用```json来包裹消息。
      2. introduction书籍简介需详细全面, 100-200字，包括:
         - 写作背景和目的
         - 核心内容和主要论点
         - 在该领域的地位和影响
         - 主要章节结构
      3. viewpoints需提供至少20个核心观点:
         - 必须是书中的原文引用，不自行改写或总结
         - 选择最具代表性和影响力的句子
         - 确保涵盖书籍的主要章节和核心思想

  # 搜索书籍
  - key: book_search
    content: |
      请根据搜索关键词"{{searchTerm}}"，搜索相关的书籍信息。返回最多8个最相关的结果，按以下JSON格式：
      {
        "results": [
          {
            "title": "书名",
            "author": "作者姓名",
            "category": "书籍分类",
            "introduction": "书籍简介（50-100字）",
            "isbn": "ISBN号（如有）",
            "publishYear": "出版年份（如有）"
          }
        ]
      }

      要求：
      1. 只返回JSON格式数据，不要包含其他文字，不要使用```json来包裹消息
      2. **书名必须与搜索关键词高度相关**：书名应包含搜索词的核心词汇，或者是该关键词的直接相关作品
      3. **严格过滤不相关书籍**：排除书名与搜索词完全不搭、主题不符的书籍。例如搜索"管理的实践"时，不要返回"第五项修炼"等主题不同的管理类书籍
      4. **优先级排序**：
         - 第一优先：书名与搜索词完全匹配或高度相似的书籍
         - 第二优先：同一作者的其他相关作品
         - 第三优先：同一主题的权威经典书籍
      5. 选择权威和知名的版本，尽量包含ISBN号和出版年份
      6. introduction要简洁明了，突出书籍的核心价值和内容
      7. 如果找不到8本高度相关的书籍，宁可少返回也不要凑数

  # ==========================================================================
  # 周报相关提示词
  # ==========================================================================

  # 周报生成模板（使用 Jinja 语法）
  # 模板变量：
  #   - title: 周报标题，如 "本周（12月2日 - 12月8日）"
  #   - periodTitle: 时间段标题，如 "本周"
  #   - previousAppIdeas: 上周的产品思考（可选）
  #   - articles: 文章列表 [{id, title, summary}]
  #   - diaries: 日记列表 [{id, date, summary}]
  #   - viewpoints: 书摘列表 [{id, title, content}]
  - key: weekly_summary_template
    content: |
      你是一个智能知识管理助手，请帮我生成{{ title }}的个人周报。

      ## 输出要求
      1. **纯 Markdown 格式**，禁止 JSON、代码块包裹
      2. 每个板块用列表形式呈现，结构清晰
      3. 适当使用 emoji 增加可读性
      4. 引用格式：[[type:ID:标题]]，如 [[article:123:文章标题]]

      ## 输出格式（三个板块，每条都是：一句话总结 + 展开说明 + 引用链接）

      ### 🌱 {{ periodTitle }}感悟

      - **一句话总结**。展开说明具体内容... [[diary:ID:日期]] 或 [[viewpoint:ID:标题]]
      - **另一个感悟总结**。具体内容...
      - （2-4 条，每条独立完整）

      ---

      ### 💡 产品灵感
      {% if previousAppIdeas %}
      - **延续上周：xxx想法**。本周新的思考和深化...
      {% endif %}
      - **一句话描述产品想法**。问题是什么、解决思路是什么...
      - **另一个产品方向**。具体说明...
      - （1-3 条核心想法，会保存用于下周迭代）

      ---

      ### 📊 行业动态

      - **一句话趋势总结**。具体说明... [[article:ID:标题]]
      - **另一个行业观察**。具体内容...
      - （2-4 条，附上文章引用）

      ---

      ## 格式示例

      ### 🌱 本周感悟

      - **系统化思考比单点优化更重要**。读《原则》[[viewpoint:5:生活原则]] 时意识到，很多问题反复出现是因为没有建立系统，而只是在解决表面问题。
      - **早起的关键是早睡而非闹钟**。这周尝试调整作息 [[diary:12:12月5日]]，发现强制早起只会更疲惫，真正有效的是控制晚上的时间。

      ---

      ### 💡 产品灵感

      - **个人知识图谱工具**。阅读笔记之间缺乏关联，可以做一个自动提取概念并建立关联的工具。
      - **专注力追踪 App**。记录每天的专注时段和干扰因素，用数据帮助改善工作习惯。

      ---

      ### 📊 行业动态

      - **AI Agent 从概念走向落地**。多篇文章提到 Agent 的实际应用场景 [[article:45:AI Agent实践]]，从简单的对话扩展到任务执行。
      - **本地优先架构受到更多关注**。Local-first 理念在开发者社区升温 [[article:52:Local-first软件]]，强调数据所有权和离线能力。

      ---

      ## 原始内容

      {% if previousAppIdeas %}
      【上周产品思考】
      {{ previousAppIdeas }}

      {% endif %}
      {% for article in articles %}
      [文章 ID:{{ article.id }}]《{{ article.title }}》
      {{ article.summary }}

      {% endfor %}
      {% for diary in diaries %}
      [日记 ID:{{ diary.id }}] {{ diary.date }}
      {{ diary.summary }}

      {% endfor %}
      {% for viewpoint in viewpoints %}
      [书摘 ID:{{ viewpoint.id }}]「{{ viewpoint.title }}」
      {{ viewpoint.content }}

      {% endfor %}

